<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Les Travaux Pratiques du cours Urbanisation des Systèmes d'Information"><meta name=author content="Lilia Sfaxi"><link href=http://INSATunisia.github.io/TP-Urbanisation/tp3/ rel=canonical><link rel=icon href=../img/favicon.ico><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.10"><title>TP3 - Orchestration de Services avec Camunda - TP Urbanisation des Systèmes d'Information</title><link rel=stylesheet href=../assets/stylesheets/main.d6be258b.min.css><link rel=stylesheet href=../assets/stylesheets/palette.e6a45f82.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Questrial:300,400,400i,700%7CSource+Code+Pro&display=fallback"><style>:root{--md-text-font:"Questrial";--md-code-font:"Source Code Pro"}</style><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../stylesheets/extra.css><link rel=stylesheet href=../stylesheets/links.css><link rel=stylesheet href=../stylesheets/custom.css><script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=amber data-md-color-accent=amber> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#telecharger-pdf class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="TP Urbanisation des Systèmes d'Information" class="md-header__button md-logo" aria-label="TP Urbanisation des Systèmes d'Information" data-md-component=logo> <img src=../img/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TP Urbanisation des Systèmes d'Information </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> TP3 - Orchestration de Services avec Camunda </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=amber data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=amber data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/INSATunisia/TP-Urbanisation/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> INSATunisia/TP-Urbanisation </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="TP Urbanisation des Systèmes d'Information" class="md-nav__button md-logo" aria-label="TP Urbanisation des Systèmes d'Information" data-md-component=logo> <img src=../img/logo.png alt=logo> </a> TP Urbanisation des Systèmes d'Information </label> <div class=md-nav__source> <a href=https://github.com/INSATunisia/TP-Urbanisation/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> INSATunisia/TP-Urbanisation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Travaux Pratiques Urbanisation des SI </a> </li> <li class=md-nav__item> <a href=../projet/ class=md-nav__link> Projet </a> </li> <li class=md-nav__item> <a href=../tp1/ class=md-nav__link> TP1 - Services Web SOAP avec Mule ESB </a> </li> <li class=md-nav__item> <a href=../tp2/ class=md-nav__link> TP2 - REST API Management avec Anypoint Studio </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> TP3 - Orchestration de Services avec Camunda <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> TP3 - Orchestration de Services avec Camunda </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#telecharger-pdf class=md-nav__link> Télécharger PDF </a> </li> <li class=md-nav__item> <a href=#objectifs-du-tp class=md-nav__link> Objectifs du TP </a> </li> <li class=md-nav__item> <a href=#outils-et-versions class=md-nav__link> Outils et Versions </a> </li> <li class=md-nav__item> <a href=#camunda class=md-nav__link> Camunda </a> </li> <li class=md-nav__item> <a href=#bpmn-20 class=md-nav__link> BPMN 2.0 </a> </li> <li class=md-nav__item> <a href=#mise-en-marche class=md-nav__link> Mise en marche </a> </li> <li class=md-nav__item> <a href=#premier-projet-camunda-bpmn class=md-nav__link> Premier Projet Camunda BPMN </a> <nav class=md-nav aria-label="Premier Projet Camunda BPMN"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modelisation-du-processus-helloworld class=md-nav__link> Modélisation du processus Helloworld </a> </li> <li class=md-nav__item> <a href=#premier-deploiement-et-test class=md-nav__link> Premier déploiement et test </a> </li> <li class=md-nav__item> <a href=#creation-dun-formulaire-personnalise class=md-nav__link> Création d'un formulaire personnalisé </a> </li> <li class=md-nav__item> <a href=#creation-dun-service-task-avec-un-connecteur-java class=md-nav__link> Création d'un Service Task avec un connecteur Java </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#homework class=md-nav__link> Homework </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../tp4/ class=md-nav__link> TP4 - Intégration BPM et ESB </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#telecharger-pdf class=md-nav__link> Télécharger PDF </a> </li> <li class=md-nav__item> <a href=#objectifs-du-tp class=md-nav__link> Objectifs du TP </a> </li> <li class=md-nav__item> <a href=#outils-et-versions class=md-nav__link> Outils et Versions </a> </li> <li class=md-nav__item> <a href=#camunda class=md-nav__link> Camunda </a> </li> <li class=md-nav__item> <a href=#bpmn-20 class=md-nav__link> BPMN 2.0 </a> </li> <li class=md-nav__item> <a href=#mise-en-marche class=md-nav__link> Mise en marche </a> </li> <li class=md-nav__item> <a href=#premier-projet-camunda-bpmn class=md-nav__link> Premier Projet Camunda BPMN </a> <nav class=md-nav aria-label="Premier Projet Camunda BPMN"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modelisation-du-processus-helloworld class=md-nav__link> Modélisation du processus Helloworld </a> </li> <li class=md-nav__item> <a href=#premier-deploiement-et-test class=md-nav__link> Premier déploiement et test </a> </li> <li class=md-nav__item> <a href=#creation-dun-formulaire-personnalise class=md-nav__link> Création d'un formulaire personnalisé </a> </li> <li class=md-nav__item> <a href=#creation-dun-service-task-avec-un-connecteur-java class=md-nav__link> Création d'un Service Task avec un connecteur Java </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#homework class=md-nav__link> Homework </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/INSATunisia/TP-Urbanisation/edit/master/docs/tp3.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>TP3 - Orchestration de Services avec Camunda</h1> <p><center> <img alt=Orchestration src=../img/orchestration.png> </center></p> <h2 id=telecharger-pdf>Télécharger PDF<a class=headerlink href=#telecharger-pdf title="Permanent link">&para;</a></h2> <p><a href=../tp3.pdf><img alt="Download TP3" src=../img/pdf.png></a></p> <h2 id=objectifs-du-tp>Objectifs du TP<a class=headerlink href=#objectifs-du-tp title="Permanent link">&para;</a></h2> <p>Création d'un processus métier (Business Process) en utilisant Camunda.</p> <h2 id=outils-et-versions>Outils et Versions<a class=headerlink href=#outils-et-versions title="Permanent link">&para;</a></h2> <p>Pour ce TP, nous allons utiliser <strong>la version SaaS de Camunda et Camunda Modeler</strong>:</p> <ul> <li><a href=https://camunda.org/ >Camunda</a> - Version <em>latest</em></li> <li><a href=https://code.visualstudio.com/ >VsCode</a> - Version <em>latest</em> (ou tout autre IDE de votre choix)</li> <li><a href=https://www.java.com/ >Java</a> - Version 17 ou plus.</li> </ul> <h2 id=camunda>Camunda <a href=https://camunda.org><img alt="Camunda Website" src=../img/website.png></a><a class=headerlink href=#camunda title="Permanent link">&para;</a></h2> <p>Camunda est une plateforme open source pour la gestion des processus métier. C'est un framework Java qui support <strong>BPMN</strong> pour l'automatisation des processus, <strong>CMMN</strong> pour le Case Management, et <strong>DMN</strong> pour le Business Decision Management.</p> <h2 id=bpmn-20>BPMN 2.0 <a href=http://www.bpmn.org/ ><img alt="BPMN Website" src=../img/website.png></a><a class=headerlink href=#bpmn-20 title="Permanent link">&para;</a></h2> <p>BPMN 2.0 (Business Process Modeling Notation) est un standard développé par le Object Management Group (<strong>OMG</strong>) pour fournir une notation facilement compréhensible par tous les utilisateurs métier: les analystes métier, les développeurs implémentant les technologies exécutant ces processus et les personnes gérant et supervisant ces processus. BPMN permet d'établir un pont minimisant le gap entre les conceptions des processus et leurs implémentations.</p> <p>Dans sa première version, la spécification BPMN permettait de fournir uniquement une notation graphique, et est devenue rapidement célèbre parmi les analystes métier. Elle définissait la manière dont les concepts tels que les tâches humaines et les scripts exécutables, pouvaient être visualisées de manière standard, indépendante d'un constructeur particulier.</p> <p>Cette deuxième version étend ce standard en incluant des sémantiques d'exécution et un format d'échange commun. Ce qui veut dire que les modèles de processus BPMN 2.0 peuvent être échangés entre des éditeurs graphiques différents, et exécutés sur n'importe quel moteur compatible avec BPMN 2.0, tel que Camunda et Activiti.</p> <h2 id=mise-en-marche>Mise en marche<a class=headerlink href=#mise-en-marche title="Permanent link">&para;</a></h2> <p>Pour les besoins de ce TP, créer d'abord un compte sur <a href=https://camunda.org>Camunda</a>. Une fois c'est fait, suivre les étapes pour créer un cluster temporaire. Vous vous retrouverez dans la fenêtre Console, qui ressemble à ce qui suit:</p> <p><img alt="Console Camunda" src=../img/tp3/camunda-console.png></p> <h2 id=premier-projet-camunda-bpmn>Premier Projet Camunda BPMN<a class=headerlink href=#premier-projet-camunda-bpmn title="Permanent link">&para;</a></h2> <h3 id=modelisation-du-processus-helloworld>Modélisation du processus Helloworld<a class=headerlink href=#modelisation-du-processus-helloworld title="Permanent link">&para;</a></h3> <p>Nous allons utiliser le Web Modeler pour concevoir un diagramme BPMN. Pour cela:</p> <ul> <li>Cliquer sur le bouton carré se trouvant en haut à gauche de la fenêtre (<img alt="Icone Elements" src=../img/tp3/icone-elements.png>). Choisir ensuite <strong>Modeler</strong> puis cliquer sur <strong>New Project</strong>.</li> <li>Appeler le projet <em>Helloworld</em>, ensuite cliquer sur <strong>Create New File</strong> -&gt; <strong>BPMN Diagram</strong>.</li> <li>Appeler le diagramme <em>HelloworldDiagram</em>, puis aller dans, propriétés du diagramme, sous l'onglet <strong>General</strong>, définir:<ul> <li><em>Name</em>: Helloworld</li> <li><em>ID</em>: ProcessHW</li> </ul> </li> <li>Double-cliquer sur l'évènement de départ (le petit rond) pour modifier son nom. Nous l'appelerons <em>Dis Bonjour</em>.</li> <li>Cliquer sur l'évènement de départ, choisir le rectangle (représentant une activité) à partir du menu contextuel qui apparaît, et le glisser vers un emplacement adéquat. Nous appellerons le nouvel évènement inséré <em>Ajouter Bonjour</em>.</li> </ul> <p><center><img src=../img/tp3/menu-contextuel.png width=200></center></p> <ul> <li>Cette tâche sera celle où l'utilisateur va indiquer son nom pour l'éternel <strong>Bonjour &lt;nom>!</strong>. Pour cela, nous devons indiquer que le traitement fait ici sera réalisé par un humain. Pour cela, en cliquant sur l'activité créée, cliquer dans le menu contextuel sur la clef à molette, puis choisir <em>User Task</em>. On l'appellera <em>Bonjour qui?</em></li> </ul> <p><center><img src=../img/tp3/user-task.png width=500></center></p> <ul> <li>Rajouter une tâche de fin au processus.</li> </ul> <p>Nous obtenons pour finir le diagramme suivant:</p> <p><center><img src=../img/tp3/hw-process.png width=500></center></p> <h3 id=premier-deploiement-et-test>Premier déploiement et test<a class=headerlink href=#premier-deploiement-et-test title="Permanent link">&para;</a></h3> <p>Pour déployer votre processus, il suffit de cliquer sur <strong>Deploy</strong>. Le processus Helloworld sera déployé sur le cluster nouvellement créé.</p> <p>Pour exécuter le processus:</p> <ul> <li>Cliquer sur <strong>Run</strong>. </li> <li>Pour voir l'état du processus en cours:<ul> <li>Cliquer sur le bouton (<img alt="Icone Elements" src=../img/tp3/icone-elements.png>), puis sur <strong>Operate</strong>. Cliquer sur l'instance active Helloworld.</li> <li>Dans Operate, vous verrez une visualisation de l'instance du processus en cours. Remarquez qu'un jeton vert est en attente à la tâche de l'utilisateur. Cela signifie qu'une tâche attend d'être traitée dans la liste des tâches.</li> </ul> </li> <li>Pour exécuter le processus:<ul> <li>Cliquer encore une fois sur (<img alt="Icone Elements" src=../img/tp3/icone-elements.png>), puis sur <strong>Tasklist</strong>. Cliquer ensuite sur <em>Bonjour qui?</em>.</li> <li>La tâche n'étant actuellement affectée à aucun utilisateur, vous verrez <em>Unassigned</em> à côté du bon de la tâche.</li> <li>Cliquer sur <em>Assign to me</em>.</li> <li>Cliquer ensuite sur <em>Complete Task</em>. Nous n'avions de toute façon rien d'autre à faire. </li> <li>La tâche passera à l'état <em>Completed</em>, et on verra dans la fenêtre <em>Operate</em> que le marqueur vert a disparu. </li> </ul> </li> </ul> <h3 id=creation-dun-formulaire-personnalise>Création d'un formulaire personnalisé<a class=headerlink href=#creation-dun-formulaire-personnalise title="Permanent link">&para;</a></h3> <p>Pour créer votre propre formulaire, avec des variables en entrée qui peuvent être manipulées par le service, suivre les étapes suivantes:</p> <ul> <li>Revenir vers le Modeler, et cliquer sur la tâche utilisateur <em>Bonjour qui?</em>.</li> <li>Cliquer sur le bouton bleu qui apparaît, puis sur <em>Create new form</em>, comme indiqué dans la fenêtre suivante: <center><img src=../img/tp3/new-form.png width=300></center></li> <li>Ajouter dans le générateur de formulaire un champs de type <em>Text Area</em>. Changer son label pour <strong>Nom</strong> et sa clef pour <strong>nom</strong>. Cette clef représentera une variable de processus, veiller à ce qu'elle soit unique.</li> </ul> <p>Une fois le fomulaire créé, il faut l'assosier à la tâche.</p> <ul> <li>Revenir vers le diagramme en cliquant sur <em>Helloworld</em> dans l'historique de navigation en haut de la fenêtre, puis en revenant vers le <em>Helloworld Diagram</em>.</li> <li>Refaire les mêmes étapes en cliquant sur la tâche <em>Bonjour qui?</em>, sur le bouton de formulaire, mais en choisissant maintenant le nouveau formulaire créé qui s'appelle aussi <em>Bonjour qui?</em>. <center><img src=../img/tp3/bonjour-form.png width=300></center></li> </ul> <p>Testons maintenant que ce formulaire marche bien. Pour cela, redéployer le processus puis l'exécuter. Vous verrez cette fois la variable <em>nom</em> dans la liste des variables.</p> <p>Une fois le processus affecté à vous, définir la valeur de nom, puis cliquer sur <em>Complete Task</em>. Rien ne se passera, car on n'a pas dit ce qu'on devait faire avec cette nouvelle entrée. Nous allons le faire dans la partie suivante.</p> <h3 id=creation-dun-service-task-avec-un-connecteur-java>Création d'un Service Task avec un connecteur Java<a class=headerlink href=#creation-dun-service-task-avec-un-connecteur-java title="Permanent link">&para;</a></h3> <p>La fameuse salutation <em>Hello <name>!</em> sera réalisée par une nouvelle tâche de type <strong>Service Task</strong>. Pour la définir:</p> <ul> <li>Insérer une tâche <em>Bonjour!</em> de type <strong>Service Task</strong> entre <em>Bonjour qui?</em> et la tâche de fin.</li> <li>Pour la configurer, il faut:<ul> <li>Lui donner un type: c'est une chaîne de caractères permettant d'identifier la tâche de faon unique, et de lui associer le traitement à faire, plus tard dans le code. Nous allons définir comme type: <em>hello</em>.</li> <li>Ajouter dans la partie Headers l'élément suivant, qui indique que la sortie de cette tâche sera contenue dans une variable <em>greeting</em>:<ul> <li>Key: <em>resultVariable</em></li> <li>Value: <em>greeting</em></li> </ul> </li> </ul> </li> </ul> <p>Nous allons maintenant créer un connecteur de type Spring app, dont le but est de définir le comportement de la tâche. Cela va de soi que ce que nous présentons ici est une version simplifiée de ce qui pourra être plus tard, un comportement bien plus complexe du processus.</p> <p>Nous allons pour réaliser ce service adapter un code fourni par Camunda. Je me suis inspirée dans cette partie de leur <a href="https://www.youtube.com/watch?v=wG6sqmMUo30">tutoriel vidéo</a>.</p> <ul> <li>Cloner le projet Git suivant: <a href=https://github.com/camunda/connector-template-outbound/ >https://github.com/camunda/connector-template-outbound/</a></li> <li> <p>Ce projet définit principalement 5 fichiers importants:</p> <ul> <li>La classe <strong>MyConnectorRequest</strong>: représente le format de l'input de la <em>Service Task</em> qu'on essaie d'implémenter. Dans le projet initial, cet input définit deux variables: message (de type texte) et authentication (de type map, contenant deux élements: un user et un token). Il faut modifier cette requête pour qu'elle accepte uniquement une entrée de type texte, appelée <strong>nom</strong>.</li> <li>La classe <strong>MyConnectorResult</strong>, qui définit le format de la sortie de la tâche. Cette sortie est une chaîne de caractères <em>myProperty</em>, nous allons la garder telle qu'elle est.</li> <li> <p>La classe <strong>MyConnectorFunction</strong>, qui décrit:</p> <ul> <li>Le connecteur dans l'annotation <em>@OutboundConnector</em>. Nous devons le modifier de façon à ce qu'il accepte comme entrée un seul élement <em>nom</em>, et que le type soit <em>"hello"</em>: c'est le même type que nous avons associé à la tâche dans le modeler.</li> <li>La méthode <em>executeConnector</em> qui définit le comportement du connecteur. Nous aimerions juste qu'il sauvegarde l'input <em>nom</em> trouvé dans la requête dans une variable, puis qu'il donne en sortie: <em>"Bonjour &lt;nom>!"</em></li> </ul> </li> <li> <p>La classe <strong>LocalConnectorRuntime</strong> sous le répertoire <em>test</em>:</p> <ul> <li>Cette classe permet de lancer la tâche. </li> <li>Il est recommandé de <strong>supprimer les autres classes de test</strong> pour éviter les erreurs. Elles nous sont inutiles pour le moment.</li> </ul> </li> <li>Le fichier <strong>application.properties</strong> sous le répertoire <em>test</em><ul> <li>Ce fichier contient les informations de connexion au cluster Camunda.</li> <li>Il faut supprimer le contenu de ce fichier, et garder uniquement la ligne <code>camunda.connector.polling.enabled=false</code>. Nous allons le remplir avec les informations nécessaires plus tard.</li> </ul> </li> </ul> </li> </ul> <p>Une fois les modifications apportées au code, nous allons ajouter les informations de connexion au cluster. Pour cela:</p> <ul> <li>Dans Camunda Console, dans les informations de votre cluster, cliquer sur l'onglet <em>API</em>.</li> </ul> <p><img alt="Cluster Info" src=../img/tp3/info-cluster.png></p> <ul> <li>Créer une nouvelle API. Lui donner un nom de votre choix, et garder les autres config telles qu'elles.</li> <li>Copier et télécharger les informations données sous l'onglet <em>Spring Boot</em>.</li> <li>Coller ces données dans le fichier <em>application.properties</em>.</li> </ul> <p>Exécuter votre connecteur en lançant la classe <em>LocalConnectorRuntime</em>. Vérifier bien que la sortie ressemble à ce qui suit: <img alt="Console Output" src=../img/tp3/output-console.png></p> <p>Nous allons maintenant le tester. Lancer le votre processus et observer son avancement dans la page Operate. </p> <ul> <li>Le processus commence par attendre l'input de l'utilisateur dans la tâche <em>Bonjour qui?</em>:</li> </ul> <p><img alt=Step1 src=../img/tp3/process-1.png></p> <ul> <li>Ouvrir la fenêtre <em>Tasklist</em> et lancer le processus. Saisir votre nom dans le champ <em>Nom</em>:</li> </ul> <p><img alt=Step2 src=../img/tp3/process-2.png></p> <ul> <li>Revenir à la fenêtre <em>Operate</em>. Si tout se passe bien, le processus aura été achevé, et une nouvelle variable apparaît: <em>greeting</em>, avec la valeur : <em>Bonjour &lt;votre_nom>!</em></li> </ul> <p><img alt=Step3 src=../img/tp3/process-3.png></p> <!--###################################--> <h2 id=homework>Homework<a class=headerlink href=#homework title="Permanent link">&para;</a></h2> <div class="admonition note"> <p class=admonition-title>Projet E3</p> <p>Pour la séance de TP prochaine, vous devez réaliser l'étape 3 du projet, qui consiste à:</p> <ul> <li>Concevoir et implémenter les processus métiers choisis de votre entreprise, avec Camunda ou tout autre outil BPM de votre choix.</li> <li>Commencer l'implémentation et configuration de votre ESB, pour permettre la communication entre les services, processus métiers et clients. </li> </ul> </div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2023-11-20T10:57:01+01:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-11-20</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../tp2/ class="md-footer__link md-footer__link--prev" aria-label="Previous: TP2 - REST API Management avec Anypoint Studio" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> TP2 - REST API Management avec Anypoint Studio </div> </div> </a> <a href=../tp4/ class="md-footer__link md-footer__link--next" aria-label="Next: TP4 - Intégration BPM et ESB" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> TP4 - Intégration BPM et ESB </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 Lilia Sfaxi </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.092fa1f6.min.js"}</script> <script src=../assets/javascripts/bundle.e3b2bf44.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> </body> </html>